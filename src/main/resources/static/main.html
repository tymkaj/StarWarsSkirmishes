<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Star Wars Skirmishes</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico"/>
</head>
<body>
<div class="stars"></div>
<div class="logo-title">Star Wars Skirmishes</div>
<h1>Welcome!</h1>
<p>Register or log in</p>

<div class="btn-container">
    <button class="btn" onclick="window.location.href='/register.html'">Register</button>
    <button class="btn" onclick="window.location.href='/login.html'">Log in</button>
</div>

<script type="module">
    import { api } from "./api.js";

    document.addEventListener("DOMContentLoaded", async () => {
        try {
            const res = await api('/swApi/auth/session-info', {}, { redirectOn401: false });
            if (res.ok) {
                // valid session exists â†’ go to logged in page
                window.location.href = '/mainLoggedIn.html';
            } else {
                // no valid session (401) -> stay on main.html
            }
        } catch (err) {
            // 403 or network errors
            console.warn('Error while checking session:', err);
        }
    });
</script>



</body>
</html>

